# LD2412 雷達數據分析系統使用說明

## 🎯 系統概述

這是一個專為LD2412雷達傳感器設計的數據分析系統，提供即時數據分析、行為模式識別、視覺化圖表和智能警報功能。

## 📊 主要功能

### 1. 即時數據分析
- **目標檢測狀態** - 移動/靜止/無目標
- **距離測量** - 移動距離、靜止距離、檢測距離
- **能量分析** - 移動能量、靜止能量
- **光感數據** - 環境光線檢測

### 2. 統計分析
- **檢測率統計** - 移動/靜止/無目標百分比
- **距離範圍** - 最大/最小檢測距離
- **能量峰值** - 最大移動/靜止能量

### 3. 行為模式識別
- **接近行為** - 目標快速接近檢測
- **離開行為** - 目標快速離開檢測
- **穩定存在** - 目標穩定停留檢測
- **雜訊分析** - 環境干擾識別

### 4. 視覺化圖表
- **距離趨勢圖** - 顯示最近20個數據點的距離變化
- **能量分布圖** - 移動/靜止能量對比分析

### 5. 智能警報
- **近距離警報** - 目標接近50cm內
- **高能量警報** - 能量值超過80
- **快速接近警報** - 目標快速接近檢測

## 🚀 快速開始

### 命令行版本 (推薦)

1. **運行程序**
   ```bash
   python3 ld2412_analyzer_cli.py
   ```

2. **自動流程**
   - 自動連接到串列埠 `/dev/cu.usbserial-0001`
   - 自動發送啟動命令
   - 開始即時監控和分析

3. **操作命令**
   - 按 `Ctrl+C` 退出程序
   - 程序會每0.5秒自動更新顯示

## 📈 數據解讀

### 即時數據區
```
📊 即時數據:
  目標狀態: 🏃 移動目標
  移動距離:  120 cm  能量:  65
  靜止距離:  150 cm  能量:  45
  檢測距離:  120 cm  光感:  10
```

- **目標狀態**: 顯示當前檢測到的目標類型
- **距離數據**: 以厘米為單位的距離測量
- **能量數據**: 0-100的能量強度值
- **光感數據**: 環境光線強度

### 統計分析區
```
📈 統計分析:
  總幀數: 1250
  移動檢測: 450 (36.0%)
  靜止檢測: 300 (24.0%)
  無目標: 500 (40.0%)
  距離範圍: 30 - 450 cm
  最大能量: 移動=95 靜止=85
```

- **總幀數**: 接收到的數據幀總數
- **檢測比例**: 各類型檢測的百分比
- **距離範圍**: 檢測到的最小和最大距離
- **能量峰值**: 記錄的最大能量值

### 行為模式區
```
🎯 行為模式:
  接近次數: 15
  離開次數: 12
  穩定次數: 45
```

- **接近次數**: 檢測到目標快速接近的次數
- **離開次數**: 檢測到目標快速離開的次數
- **穩定次數**: 目標在穩定距離停留的次數

## 📉 圖表說明

### 距離趨勢圖
```
 450 |    ██
 360 |   ████
 270 |  ██████
 180 | ████████
  90 |██████████
   0 |██████████████████
     --------------------
     01234567890123456789
```

- 縱軸: 距離值 (cm)
- 橫軸: 時間序列 (最近20個數據點)
- █ 符號: 距離數據點

### 能量分布圖
```
100 |░░  ██
 75 |░░░ ███
 50 |░░░████▓
 25 |░░█████▓▓
  0 |░████████▓▓▓
    --------------------
    █=移動 ░=靜止 ▓=重疊
```

- █: 移動能量
- ░: 靜止能量
- ▓: 移動和靜止能量重疊

## ⚠️ 警報說明

系統會自動檢測以下情況並發出警報：

1. **近距離警報** - 當目標距離小於50cm時
2. **高能量警報** - 當能量值超過80時
3. **快速接近警報** - 當目標在短時間內接近超過50cm

## 🔧 進階設定

### 修改串列埠
如需修改串列埠，編輯 `ld2412_analyzer_cli.py` 文件：
```python
self.port_name = "/dev/cu.usbserial-0001"  # 修改為您的串列埠
```

### 調整警報閾值
```python
self.alerts = {
    'close_range': 50,      # 近距離警報閾值 (cm)
    'high_energy': 80,      # 高能量警報閾值
    'rapid_approach': True  # 是否啟用快速接近警報
}
```

## 📱 應用場景

1. **安防監控** - 檢測入侵者接近
2. **智能照明** - 根據人體存在控制燈光
3. **行為分析** - 分析人員活動模式
4. **節能管理** - 根據人員存在控制設備

## 🛠️ 故障排除

### 無法連接串列埠
- 檢查設備是否正確連接
- 確認串列埠路徑正確
- 檢查權限設定

### 無數據顯示
- 確認LD2412已正確接線
- 檢查波特率設定 (115200)
- 嘗試重新發送啟動命令

### 數據異常
- 檢查是否有電磁干擾
- 確認供電穩定 (3.3V)
- 調整靈敏度設定

## 📊 數據導出

雖然目前版本未提供直接導出功能，但您可以：
1. 使用終端記錄功能保存輸出
2. 修改程序添加CSV導出功能
3. 截圖保存重要數據

## 🔄 更新日誌

### v1.0 (2024-01)
- 初始版本發布
- 基本數據分析功能
- 即時圖表顯示
- 智能警報系統

## 💡 使用技巧

1. **最佳檢測距離**: 2-6米範圍內效果最佳
2. **減少干擾**: 避免風扇、空調等設備直吹
3. **安裝位置**: 建議安裝在1.5-2米高度
4. **定期校準**: 每月清除數據重新校準一次

## 📞 技術支援

如遇到問題，請參考：
- [接線指南](docs/wiring_guide.md)
- [測試報告模板](docs/test_report_template.md)
- LD2412官方文檔

---

**注意**: 本系統僅供學習和測試使用，實際應用請根據具體需求調整參數。 