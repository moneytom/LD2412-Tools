# LD2412 圖形化控制介面使用說明

## 功能特色

✅ **直觀的圖形化介面** - 使用tkinter構建，支援中文介面
✅ **即時數據監控** - 自動接收和解析LD2412數據
✅ **命令發送功能** - 預定義和自定義命令發送
✅ **16進制數據分析** - 自動解析數據幀和命令幀
✅ **統計資訊顯示** - 即時統計接收數據

## 介面說明

### 1. 連接控制區域
- **串列埠設定**: 預設為 `/dev/cu.usbserial-0001`
- **波特率選擇**: 支援 9600、115200、256000
- **連接按鈕**: 點擊連接/斷開串列埠
- **狀態顯示**: 顯示連接狀態（紅色=未連接，綠色=已連接）

### 2. 命令控制區域

#### 預定義命令
- **進入配置模式**: `FD FC FB FA 04 00 FF 00 01 00 04 03 02 01`
- **退出配置模式**: `FD FC FB FA 02 00 FE 00 04 03 02 01`
- **查詢版本**: `FD FC FB FA 02 00 A0 00 04 03 02 01`
- **開始數據輸出**: `FD FC FB FA 02 00 12 00 04 03 02 01`
- **查詢參數**: `FD FC FB FA 02 00 61 00 04 03 02 01`
- **重啟模組**: `FD FC FB FA 02 00 A3 00 04 03 02 01`
- **恢復出廠設定**: `FD FC FB FA 02 00 A2 00 04 03 02 01`

#### 自定義命令
- 格式：`FF FF FF FF`（16進制，空格分隔）
- 例如：`AA BB CC DD EE`

### 3. 數據顯示區域

#### 左側 - 原始16進制數據
- 顯示所有發送和接收的原始數據
- 時間戳記錄
- 自動滾動到最新數據

#### 右側 - 數據解析結果
- **數據幀分析**: 
  - 目標狀態（目標存在、移動目標、靜止目標）
  - 移動目標距離和能量
  - 靜止目標距離和能量
  - 檢測距離
  - 光感數據（如果有）

- **命令幀分析**:
  - 命令碼識別
  - 命令名稱解析
  - 命令數據內容

### 4. 統計資訊
- **總字節**: 累計接收的字節數
- **數據幀**: 成功解析的數據幀數量
- **命令幀**: 成功解析的命令幀數量

## 使用步驟

### 1. 啟動程序
```bash
python3 ld2412_gui.py
```

### 2. 連接設備
1. 確認串列埠路徑正確
2. 選擇適當的波特率（建議115200）
3. 點擊「連接」按鈕

### 3. 開始監控
1. 點擊「開始監控」按鈕
2. 觀察數據顯示區域的即時數據

### 4. 發送命令
1. **使用預定義命令**:
   - 從下拉選單選擇命令
   - 點擊「發送預定義」

2. **使用自定義命令**:
   - 在輸入框輸入16進制命令
   - 點擊「發送自定義」

### 5. 數據分析
- 左側顯示原始16進制數據
- 右側顯示解析後的結構化資訊
- 底部統計資訊即時更新

## 常用操作

### 初始化LD2412
1. 發送「進入配置模式」
2. 發送「查詢版本」（可選）
3. 發送「退出配置模式」
4. 發送「開始數據輸出」

### 重置設備
1. 發送「恢復出廠設定」
2. 發送「重啟模組」

### 清除顯示
- 點擊「清除顯示」按鈕清空所有顯示內容

## 數據格式說明

### 數據幀格式 (F4 F3 F2 F1 ... F8 F7 F6 F5)
```
F4 F3 F2 F1    - 幀頭
XX XX          - 數據長度
XX             - 數據類型
XX             - 保留字節
XX             - 目標狀態
XX XX          - 移動目標距離
XX             - 移動目標能量
XX XX          - 靜止目標距離
XX             - 靜止目標能量
XX XX          - 檢測距離
...            - 其他數據
F8 F7 F6 F5    - 幀尾
```

### 命令幀格式 (FD FC FB FA ... 04 03 02 01)
```
FD FC FB FA    - 幀頭
XX XX          - 數據長度
XX             - 命令碼
XX             - 命令參數
...            - 命令數據
04 03 02 01    - 幀尾
```

## 故障排除

### 連接問題
- 檢查串列埠路徑是否正確
- 確認設備已正確連接
- 嘗試不同的波特率

### 無數據接收
- 確認已點擊「開始監控」
- 嘗試發送「開始數據輸出」命令
- 檢查LD2412是否正常工作

### 數據解析錯誤
- 檢查數據幀格式是否完整
- 確認波特率設定正確
- 重新連接設備

## 進階功能

### 自定義命令範例
```
# 設定檢測距離為5米
FD FC FB FA 14 00 60 00 00 00 05 00 00 00 00 00 01 00 02 00 03 00 04 00 04 03 02 01

# 設定移動門檻
FD FC FB FA 18 00 64 00 00 00 32 32 32 32 32 32 32 32 32 32 32 32 32 32 04 03 02 01
```

## 注意事項

1. **安全操作**: 發送命令前請確認命令格式正確
2. **數據備份**: 重要配置建議先查詢並記錄
3. **設備保護**: 避免頻繁發送重啟命令
4. **監控效能**: 長時間監控建議定期清除顯示

---

**版本**: v1.0  
**作者**: LD2412測試程序  
**更新**: 2024年 