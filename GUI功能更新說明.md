# LD2412 GUI功能更新說明

## 🎯 更新摘要

本次更新完全基於LD2412官方庫規範，移除了無效命令並增加了新的實用功能。

## 📋 更新內容

### 1. 命令按鈕重新組織

#### ✅ 保留的有效命令
- **基本數據控制**
  - 🚀 開始數據輸出 (CMD_QUERY 0x0012)
  - 📋 查詢版本 (CMD_VERSION 0x00A0)
  - 📊 查詢參數 (CMD_QUERY 0x0012)
  - 🔄 重啟模組 (CMD_RESTART 0x00A3)
  - 🏭 恢復出廠設定 (CMD_RESET 0x00A2)

- **配置模式控制**
  - ⚙️ 進入配置模式 (CMD_ENABLE_CONF 0x00FF)
  - 🚪 退出配置模式 (CMD_DISABLE_CONF 0x00FE)

- **工程模式控制**
  - 🔧 開啟工程模式 (CMD_ENABLE_ENG 0x0062)
  - 🔧 關閉工程模式 (CMD_DISABLE_ENG 0x0063)

#### 🆕 新增功能
- **距離分辨率設定**
  - 🎯 距離分辨率0.75m (CMD_SET_DISTANCE_RESOLUTION)
  - 🎯 距離分辨率0.5m
  - 🎯 距離分辨率0.2m
  - 📏 查詢距離分辨率 (CMD_QUERY_DISTANCE_RESOLUTION)

- **波特率設定**
  - 📡 設定波特率115200 (CMD_SET_BAUD_RATE)
  - 📡 設定波特率256000
  - 📡 設定波特率57600

- **藍牙控制**
  - 🔗 開啟藍牙 (CMD_BLUETOOTH)
  - 🔗 關閉藍牙
  - 📱 查詢MAC (CMD_MAC)

- **進階功能**
  - 🎯 動態背景校正 (CMD_DYNAMIC_BACKGROUND_CORRECTION)
  - ❓ 查詢背景校正 (CMD_QUEY_DYNAMIC_BACKGROUND_CORRECTION)
  - 📊 查詢移動門敏感度 (CMD_QUERY_MOTION_GATE_SENS)
  - 📊 查詢靜止門敏感度 (CMD_QUERY_STATIC_GATE_SENS)

#### ❌ 移除的無效命令
- ⏹️ 停止數據輸出 (不存在於官方庫)
- 🎯 設定最大距離 (使用錯誤的命令碼)
- 💡 光感功能控制 (在官方庫中被註釋掉)

### 2. 新增組合功能按鈕

#### 🎯 常用功能組合
- **🔧 工程模式初始化**
  - 自動進入配置模式 → 開啟工程模式 → 退出配置模式 → 開始數據輸出
  - 適合快速切換到工程模式進行調試

- **📏 查詢所有設定**
  - 一次性查詢版本、MAC、距離分辨率、參數、敏感度等所有設定
  - 適合設備診斷和狀態檢查

- **🎯 標準配置**
  - 設定距離分辨率0.75m、關閉工程模式
  - 適合恢復到標準工作狀態

- **📊 詳細診斷**
  - 執行完整的設備診斷，包括所有參數查詢和工程模式測試
  - 適合深度故障排除

- **🔄 完整重啟**
  - 重啟模組並重新初始化
  - 適合解決設備異常狀態

### 3. 命令回應解析增強

#### 🆕 支援的回應類型
- CMD_VERSION (0x00A0) - 版本資訊
- CMD_QUERY (0x0012) - 參數回應
- CMD_QUERY_DISTANCE_RESOLUTION (0x0011) - 距離分辨率
- CMD_MAC (0x00A5) - MAC地址
- CMD_BLUETOOTH (0x00A4) - 藍牙狀態
- CMD_QUERY_MOTION_GATE_SENS (0x0013) - 移動門敏感度
- CMD_QUERY_STATIC_GATE_SENS (0x0014) - 靜止門敏感度
- CMD_QUEY_DYNAMIC_BACKGROUND_CORRECTION (0x001B) - 背景校正狀態

#### 📋 詳細解析顯示
- 重要回應會同時顯示在日誌和詳細解析分頁
- 自動解析距離分辨率數值 (0x00=0.75m, 0x01=0.5m, 0x03=0.2m)
- MAC地址格式化顯示
- 敏感度數值陣列解析

### 4. 智能命令提示

#### ⚠️ 配置模式檢查
- 距離分辨率設定、波特率設定、藍牙控制等命令會檢查是否已進入配置模式
- 提供友善的提示信息

#### 💡 操作建議
- 波特率變更後提示需要重啟模組
- 動態背景校正提示需要約2分鐘完成
- 監控狀態檢查和建議

## 🔧 技術改進

### 1. 基於官方庫規範
- 所有命令碼都基於官方LD2412庫定義
- 命令格式嚴格遵循官方規範
- 移除了所有非標準命令

### 2. 錯誤處理增強
- 更詳細的錯誤提示
- 智能命令狀態檢查
- 操作建議和提示

### 3. 用戶體驗改善
- 組合功能簡化複雜操作
- 自動化常用工作流程
- 友善的操作提示

## 📈 使用建議

### 新用戶
1. 使用「🔧 工程模式初始化」快速進入工程模式
2. 使用「📏 查詢所有設定」了解設備狀態
3. 使用「🎯 標準配置」設定為推薦配置

### 進階用戶
1. 使用「📊 詳細診斷」進行全面檢測
2. 根據需要調整距離分辨率和波特率
3. 使用門敏感度查詢功能調整檢測精度

### 故障排除
1. 使用「🔄 完整重啟」重置設備狀態
2. 使用「🏭 恢復出廠設定」恢復默認設定
3. 使用詳細解析分頁查看命令回應詳情

## 🎯 未來規劃

1. **門敏感度設定功能** - 增加設定各門敏感度的GUI控制
2. **數據導出功能** - 支援數據記錄和分析
3. **自動檢測優化** - 基於使用場景的自動配置建議
4. **遠程控制** - Web界面支援 